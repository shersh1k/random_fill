(this.webpackJsonprandom_fill=this.webpackJsonprandom_fill||[]).push([[0],{118:function(e,t,n){e.exports=n(268)},128:function(e,t,n){},129:function(e,t,n){},261:function(e,t,n){},262:function(e,t,n){},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},268:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),i=n.n(c),l=n(3),o=(n(128),n(72)),u=function e(t,n){Object(o.a)(this,e),this.content=void 0,this.opacity=void 0,this.content=t,this.opacity=n},f=function e(t,n){var r=this;Object(o.a)(this,e),this.x=void 0,this.y=void 0,this.currentContent=function(e){var t;return null===(t=e[r.y])||void 0===t?void 0:t[r.x]},this.x=t,this.y=n},s=n(59);function m(e,t,n){for(var r=[],a=0;a<t;a++){for(var c=[],i=0;i<e;i++)c.push(n?{color:n,opacity:1}:null);r.push(c)}return r}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6;return Math.floor(Math.random()*e)+1}function y(e,t){var n,r=e.map((function(e,n){return e.map((function(e,n){return(null===e||void 0===e?void 0:e.color)===t?new u(!0,e.opacity):null===e?new u(null,1):new u(!1,e.opacity)}))}));r.filter((function(e){return e.filter((function(e){return!1===e.content})).length})).length&&((n=r).forEach((function(e,t){return e.forEach((function(e,r){!1!==n[t][r].content&&(function e(t,n){var r=n.x,a=n.y;if(!0===t[a][r].content||function(e,t,n){return t<0||e<0||t>=n.length||e>=n[0].length}(r,a,t))return!0;var c=new f(r,a-1),i=new f(r+1,a),l=new f(r,a+1),o=new f(r-1,a),u=[c,i,l,o];return u.filter((function(e){var n;return!1===(null===(n=e.currentContent(t))||void 0===n?void 0:n.content)})).length>0?(u.forEach((function(e){void 0!==e.currentContent(t)&&!0!==e.currentContent(t).content&&(t[e.y][e.x].content=!1)})),void 0!==t[a][r]&&!0!==t[a][r].content&&(t[a][r].content=!1),t.forEach((function(e,n){return e.forEach((function(e,r){"?"===e.content&&(t[n][r].content=!1)}))})),!1):(t[a][r].content="?",u.filter((function(n){return void 0===n.currentContent(t)||!0===n.currentContent(t).content||"?"===n.currentContent(t).content||null===n.currentContent(t).content&&e(t,{x:n.x,y:n.y})})).length>=4)}(n,{y:t,x:r}),n.forEach((function(e,t){return e.forEach((function(e,r){"?"===e.content&&(n[t][r].content=!0,n[t][r].opacity=.5)}))})))}))})),n).forEach((function(n,r){return n.forEach((function(n,a){!0===n.content&&(e[r][a]={color:t,opacity:n.opacity})}))}))}function E(e){return function(t){t({type:"SET_TEMP_FIELD_MATRIX",tempFieldMatrix:e})}}function v(e){return function(t){t({type:"SET_PLAYER",dice:null,currentFigure:null,currentPlayer:e})}}var p=n(271),g=n(270),h=n(269),b=n(284),O=n(272),x=n(35),j=n(278),S=n(275);n(129);var w=function(){var e=Object(l.b)();return a.a.createElement(p.a,{initialValues:{x:20,y:20,players:["Player 1","Player 2"]},onFinish:function(t){var n,r=t.x,a=t.y,c=t.players;return e((n={x:r,y:a,players:c},function(e){var t=n.players.map((function(e,t){return{name:e,color:["Red","Green","Yellow","Blue"][t],count:0}})),r=t[d(t.length)-1];e({type:"SET_CONFIG",config:n,fieldMatrix:m(n.x,n.y),tempFieldMatrix:m(n.x,n.y),players:t,currentPlayer:r})}))},className:"configurator"},a.a.createElement(g.a,{title:"Configurator"},a.a.createElement(h.a,{direction:"vertical"},a.a.createElement(p.a.Item,Object.assign({},_,{label:"Cells horizontaly",name:"x",rules:[{required:!0,message:"Please, input Y cells"}]}),a.a.createElement(b.a,{min:20,max:45})),a.a.createElement(p.a.Item,Object.assign({},_,{label:"Cells verticaly",name:"y",rules:[{required:!0,message:"Please, input X cells"}]}),a.a.createElement(b.a,{min:20,max:45})),a.a.createElement(p.a.List,{name:"players"},(function(e,t){var n=t.add,r=t.remove;return a.a.createElement("div",{style:{minHeight:224,minWidth:270}},e.map((function(t,n){return a.a.createElement(p.a.Item,{label:"Player ".concat(n+1),required:!0,key:t.key},a.a.createElement(p.a.Item,Object.assign({},t,{initialValue:"Player ".concat(n+1),rules:[{required:!0,message:"Please input player's name."}],noStyle:!0}),a.a.createElement(O.a,{placeholder:"player name",style:{width:"90%"}})),e.length>2?a.a.createElement(j.a,{style:{marginLeft:5},title:"Remove player",onClick:function(){return r(t.name)}}):null)})),e.length<4?a.a.createElement(p.a.Item,null,a.a.createElement(x.a,{title:"Add player",type:"dashed",onClick:function(){return n()}},a.a.createElement(S.a,null)," Add player")):null)})),a.a.createElement(p.a.Item,null,a.a.createElement(x.a,{type:"primary",block:!0,htmlType:"submit",title:"Start game"},"Start")))))},_={labelCol:{span:12},wrapperCol:{span:12}};n(261);var I=function(){return a.a.createElement("div",{className:"header"},"GAME RANDOMFILL")},k=n(41),C=n(273),F=n(274),M=n(285),T=n(276),L=n(283),D=n(282),R=(n(262),function(e){var t,n=e.player,r=null===(t=Object(l.c)((function(e){return e.game.tempFieldMatrix})))||void 0===t?void 0:t.flat().filter((function(e){return.5===(null===e||void 0===e?void 0:e.opacity)})).length;if(!n)return null;var c=n.name,i=n.count,o=n.color;return a.a.createElement("div",null,a.a.createElement("div",null,c),a.a.createElement("div",{style:{color:o,fontSize:12}},"score: ",i," ",r?"+ ".concat(r," = ").concat(i+r):""))});function P(e){var t=e.item,n=e.width,r=e.height;return a.a.createElement("span",{style:{backgroundColor:(null===t||void 0===t?void 0:t.color)||"",opacity:null===t||void 0===t?void 0:t.opacity,width:n,height:r},className:"game-field__cell"})}var N=function(){var e=Object(r.useRef)(null),t=Object(l.c)((function(e){return e.game.dice})),n=Object(l.c)((function(e){return e.game.currentFigure})),c=Object(l.c)((function(e){return e.game.currentPlayer})),i=Object(l.c)((function(e){return e.game.cellWidth})),o=Object(l.c)((function(e){return e.game.cellHeight})),u=Object(l.c)((function(e){return e.game.players})),f=Object(l.c)((function(e){return e.game.tempFieldMatrix})),s=Object(l.c)((function(e){return e.game.fieldMatrix})),y=Object(r.useState)(!1),p=Object(k.a)(y,2),b=p[0],O=p[1],j=Object(r.useState)(!1),S=Object(k.a)(j,2),w=S[0],_=S[1],I=Object(l.b)(),N=Object(r.useCallback)((function(t){var n,r;e.current&&(e.current.style.left=t.pageX-e.current.offsetWidth/2+"px",e.current.style.top=t.pageY-e.current.offsetHeight/2+"px",I((n=t.x,r=t.y,function(e){e({type:"SET_FIGURE_POSITION",currentFigureX:n,currentFigureY:r})})))}),[I]);return a.a.createElement(g.a,{style:{position:"static"},title:a.a.createElement(R,{player:c}),actions:[a.a.createElement(x.a,{block:!0,type:"link",title:"Undo",icon:a.a.createElement(F.a,{style:{fontSize:"28px",color:b?"#ff4d4f":"grey"}}),disabled:!b,onClick:function(){s&&(O(!1),I(E(s)))},key:"undo"}),a.a.createElement(x.a,{block:!0,type:"link",title:"Submit move",icon:a.a.createElement(M.a,{style:{fontSize:"28px",color:b?"green":"grey"}}),disabled:!b,onClick:function(){if(u&&c&&f){var e,t=(null===f||void 0===f?void 0:f.join())!==(null===s||void 0===s?void 0:s.join());f&&t&&I((e=f.map((function(e){return e.map((function(e){return e&&(e.opacity=1),e}))})),function(t){t({type:"SET_FIELD_MATRIX",fieldMatrix:e})}));var n=u.findIndex((function(e){return e.name===c.name})),r=u[n+1]||u[0];O(!1),_(!1),c.count=f.flat().filter((function(e){return(null===e||void 0===e?void 0:e.color)===c.color})).length,I(v(Object.assign({},c))),I(v(r))}},key:"submit"})]},a.a.createElement(h.a,{style:{display:"flex",justifyContent:"center"}},a.a.createElement(x.a,{type:"primary",size:"large",title:"Roll dice/Get figure",disabled:w,onClick:function(){var e;(null===c||void 0===c?void 0:c.color)&&(_(!0),I((e=null===c||void 0===c?void 0:c.color,function(t){var n=d(),r=d();t({type:"ROLL_THE_DICE",dice:[n,r],currentFigure:m(n,r,e)})})))},icon:a.a.createElement(T.a,null)}),a.a.createElement(x.a,{title:"Rotate figure",type:"primary",size:"large",disabled:!t,onClick:function(){(null===c||void 0===c?void 0:c.color)&&I(function(e,t){return function(n){var r=e[1],a=e[0];n({type:"ROTATE_FIGURE",dice:[r,a],currentFigure:m(r,a,t)})}}(t||[1,1],null===c||void 0===c?void 0:c.color))},icon:a.a.createElement(L.a,null)}),a.a.createElement(C.a,{title:"Are you sure to skip move",onConfirm:function(){if(u&&c&&s){var e=u.findIndex((function(e){return e.name===c.name})),t=u[e+1]||u[0];O(!1),_(!1),I(v(t)),I(E(s))}}},a.a.createElement(x.a,{danger:!0,title:"Skipping",size:"large",icon:a.a.createElement(D.a,null)}))),a.a.createElement("div",{className:"new-figure-wrapper"},a.a.createElement("div",{className:"new-figure",ref:e,onMouseDown:function(t){e.current&&(e.current.style.position="absolute",e.current.style.top=t.pageY-e.current.offsetHeight/2+"px",e.current.style.left=t.pageX-e.current.offsetWidth/2+"px",document.addEventListener("mousemove",N))},onMouseUp:function(t){if(document.removeEventListener("mousemove",N),e.current){e.current.style.position="static",e.current.style.top="auto",e.current.style.left="auto";var n=(null===f||void 0===f?void 0:f.join())!==(null===s||void 0===s?void 0:s.join());f&&n&&O(!0)}}},n&&n.map((function(e,t){return a.a.createElement("div",{key:t,className:"new-figure__row"},e.map((function(e,t){return a.a.createElement(P,{key:t,item:e,width:i,height:o})})))})))))},z=(n(263),function(){var e,t=Object(l.c)((function(e){return e.game.players})),n=Object(l.c)((function(e){return e.game.currentPlayer})),r=null===(e=Object(l.c)((function(e){return e.game.tempFieldMatrix})))||void 0===e?void 0:e.flat().filter((function(e){return.5===(null===e||void 0===e?void 0:e.opacity)})).length;return t&&n?a.a.createElement(h.a,{style:{display:"flex",justifyContent:"space-around",alignItems:"center"}},t.map((function(e){return a.a.createElement("div",{key:"".concat(e.color).concat(e.count)},a.a.createElement("div",null,e.name),a.a.createElement("div",{style:{color:e.color,fontSize:12}},"score: ",e.count+(n.color===e.color&&r||0)))}))):null});var A=function(){var e=Object(r.useRef)(null),t=Object(l.b)(),n=Object(l.c)((function(e){return e.game.fieldMatrix})),c=Object(l.c)((function(e){return e.game.tempFieldMatrix})),i=Object(l.c)((function(e){return e.game.cellWidth})),o=Object(l.c)((function(e){return e.game.cellHeight})),u=Object(l.c)((function(e){return e.game.config})),f=Object(l.c)((function(e){return e.game.currentPlayer})),m=Object(l.c)((function(e){return e.game.dice})),d=Object(l.c)((function(e){return e.game.currentFigureX})),v=Object(l.c)((function(e){return e.game.currentFigureY})),p=Object(r.useState)(null),h=Object(k.a)(p,2),b=h[0],O=h[1];return Object(r.useEffect)((function(){var n=function(){if(e.current){var n,r,a=e.current.getBoundingClientRect();O(a),u&&t((n=a.width/u.x,r=a.height/u.y,function(e){e({type:"SET_CELL_SIDES",cellWidth:n,cellHeight:r})}))}};return n(),window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}),[e]),Object(r.useEffect)((function(){if(e.current&&b&&u&&c&&n&&m&&f)if(function(e,t,n){var r=e.left<t&&e.right>t,a=e.top<n&&e.bottom>n;return!(!r||!a)}(b,d,v)){var r=function(e,t,n){return{xStart:Math.round(e-n[0]/2),xEnd:Math.round(e+n[0]/2),yStart:Math.round(t-n[1]/2),yEnd:Math.round(t+n[1]/2)}}((d-b.left)/i,(v-b.top)/o,m),a=0===(null===f||void 0===f?void 0:f.count);if(function(e,t){var n=t.x,r=t.y;return e.xStart<0||e.xEnd>n||e.yStart<0||e.yEnd>r}(r,u))t(E(n));else if(a&&!function(e,t){var n=t.x,r=t.y;return e.xStart<=0&&e.yStart<=0||e.xEnd===n&&e.yStart<=0||0===e.xStart&&e.yEnd===r||e.xEnd===n&&e.yEnd===r}(r,u))t(E(n));else if(function(e,t,n,r){if(r)return!0;var a=e.reduce((function(e,n,r,a){return t.yStart-1!==r&&r!==t.yEnd||e.push.apply(e,Object(s.a)(n.filter((function(e,n){return t.xStart<=n&&n<t.xEnd})))),t.yStart<=r&&r<t.yEnd&&e.push.apply(e,Object(s.a)(n.filter((function(e,n){return t.xStart-1===n||n===t.xEnd})))),e}),[]);return!(e.reduce((function(e,n,r,a){return t.yStart<=r&&r<t.yEnd&&e.push.apply(e,Object(s.a)(n.filter((function(e,n){return t.xStart<=n&&n<t.xEnd})))),e}),[]).filter((function(e){return e})).length>0)&&a.filter((function(e){return(null===e||void 0===e?void 0:e.color)===n.color})).length>0}(n,r,f,a)){var l=function(e,t,n,r){var a=e.map((function(e,r){return t.yStart<=r&&r<t.yEnd?e.map((function(e,r){return t.xStart<=r&&r<t.xEnd?{color:n,opacity:.5}:e?Object.assign({},e):null})):e.slice()}));return r||y(a,n),a}(n,r,f.color,a);t(E(l))}else t(E(n))}else t(E(n))}),[d,v,i,o,u,t]),a.a.createElement(g.a,{title:a.a.createElement(z,null)},a.a.createElement("div",{ref:e,className:"game-field"},c&&c.map((function(e,t){return a.a.createElement("div",{key:t,className:"game-field__row"},e.map((function(e,t){return a.a.createElement(P,{key:t,item:e,width:i,height:o})})))}))))};n(264);var B=function(){return a.a.createElement(h.a,null,a.a.createElement(N,null),a.a.createElement(A,null))},G=(n(265),n(281)),W=n(280),X=n(279),H=n(277),Y=function(e){return{fontSize:22,color:e,fontWeight:"bold",display:"flex",justifyContent:"space-between",alignItems:"center"}};var U=function(){return a.a.createElement("div",{className:"footer"},a.a.createElement("a",{href:"https://github.com/shersh1k",style:Y("#323131")},a.a.createElement(G.a,null),a.a.createElement("span",{style:{fontSize:16,marginLeft:5}},"shersh1k")),a.a.createElement("a",{href:"mailto:shershnev942@gmail.com",style:Y("#db493c")},a.a.createElement(W.a,null),a.a.createElement("span",{style:{fontSize:16,marginLeft:5}},"shershnev942@gmail.com")),a.a.createElement("a",{href:"skype:anshersh?userinfo",style:Y("#00a4e8")},a.a.createElement(X.a,null),a.a.createElement("span",{style:{fontSize:16,marginLeft:5}},"anshersh")),a.a.createElement("a",{href:"https://www.linkedin.com/in/%D0%B0%D0%BD%D0%B4%D1%80%D0%B5%D0%B9-%D1%88%D0%B5%D1%80%D1%88%D0%BD%D0%B5%D0%B2-3ba8bb128/",style:Y("#0073b2")},a.a.createElement(H.a,null),a.a.createElement("span",{style:{fontSize:16,marginLeft:5}},"\u0410\u043d\u0434\u0440\u0435\u0439 \u0428\u0435\u0440\u0448\u043d\u0435\u0432")))};n(266);var q=function(){var e=Object(l.c)((function(e){return e.game.config}));return a.a.createElement("div",{className:"app"},a.a.createElement(I,null),e?a.a.createElement(B,null):a.a.createElement(w,null),a.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var J=n(33),V=n(114),$=(n(267),n(10)),K={config:null,cellWidth:0,cellHeight:0,fieldMatrix:null,tempFieldMatrix:null,dice:null,currentFigure:null,players:null,currentPlayer:null,currentFigureX:0,currentFigureY:0};var Q=[V.a];var Z=Object(J.d)(Object(J.c)({game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ROLL_THE_DICE":case"ROTATE_FIGURE":case"SET_CONFIG":case"SET_FIGURE_POSITION":case"SET_FIELD_MATRIX":case"SET_TEMP_FIELD_MATRIX":case"SET_FINAL_FIGURE_POSITION":case"SET_PLAYER":case"SET_CELL_SIDES":return Object($.a)(Object($.a)({},e),t);default:return e}}}),J.a.apply(void 0,Q));i.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(l.a,{store:Z},a.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[118,1,2]]]);
//# sourceMappingURL=main.86d5c992.chunk.js.map